<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>SDG ä¿è‚²é™¸åŸŸç”Ÿæ…‹ - ç¬¬ä¸€é—œ</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: url('https://static.vecteezy.com/system/resources/previews/000/294/449/original/a-nature-road-landscape-vector.jpg') no-repeat center center fixed;
      background-size: cover;
      overflow-x: hidden;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background-color: rgba(255, 255, 255, 0.8);
      font-size: 20px;
      position: sticky;
      top: 0;
      z-index: 2;
      display: none;
    }
    .animal {
      position: absolute;
      width: 150px;
      height: auto;
      cursor: pointer;
      user-select: none;
      transition: opacity 0.5s ease;
      display: none;
      z-index: 5;
    }
    .correct-effect {
      animation: flashGlow 0.8s ease forwards;
      box-shadow: 0 0 20px 5px #aaffaa;
      border-radius: 15px;
      transform-origin: center center;
      z-index: 10;
    }
    @keyframes flashGlow {
      0% { transform: scale(1); box-shadow: 0 0 0px 0px #aaffaa; }
      50% { transform: scale(1.15); box-shadow: 0 0 25px 10px #aaffaa; }
      100% { transform: scale(1); box-shadow: 0 0 0px 0px #aaffaa; }
    }
    #questionBox, #endScreen {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      z-index: 20;
      display: none;
      width: 300px;
      user-select: none;
    }
    #choices button, #retryBtn, #nextLevelBtn {
      display: block;
      width: 100%;
      margin: 5px 0;
      padding: 10px;
      font-size: 1rem;
      cursor: pointer;
    }
    #introScreen {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0, 50, 0, 0.85);
      color: #d4f1be;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
      z-index: 40;
    }
    #introScreen h1 { font-size: 2.8rem; margin-bottom: 20px; }
    #introScreen p { font-size: 1.3rem; line-height: 1.6; max-width: 400px; margin-bottom: 40px; }
    #startBtn {
      background-color: #a3c644;
      border: none;
      padding: 15px 40px;
      font-size: 1.2rem;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 5px 10px #78912f;
      transition: background-color 0.3s ease;
    }
    #startBtn:hover { background-color: #8ab130; }
  </style>
</head>
<body>

<!-- ğŸµ èƒŒæ™¯éŸ³æ¨‚ -->
<audio id="bgMusic" src="music.mp3" loop></audio>
<script>
  const music = document.getElementById('bgMusic');
  music.volume = 0.3; // éŸ³é‡è¨­å®š

  window.addEventListener('DOMContentLoaded', () => {
    document.getElementById('startBtn').addEventListener('click', () => {
      music.play().catch(() => {
        console.warn("ä½¿ç”¨è€…å°šæœªäº’å‹•ï¼ŒéŸ³æ¨‚ç„¡æ³•è‡ªå‹•æ’­æ”¾");
      });
    });
  });
</script>

<div id="introScreen">
  <h1>æ­¡è¿ä¾†åˆ°ä¿è‚²é™¸åŸŸç”Ÿæ…‹å†’éšª - ç¬¬ä¸€é—œï¼</h1>
  <p>é»æ“Šç•«é¢ä¸Šçš„å‹•ç‰©ï¼Œå›ç­”å•é¡Œï¼Œç­”å°æ‰æœƒå‡ºç¾ä¸‹ä¸€éš»ï¼</p>
  <button id="startBtn">é–‹å§‹éŠæˆ²</button>
</div>

<header>
  <div>SDG ä¿è‚²é™¸åŸŸç”Ÿæ…‹</div>
  <div>åˆ†æ•¸ï¼š<span id="score">0</span>/10</div>
</header>

<!-- å‹•ç‰©åœ–ç‰‡ -->
<img src="images/deer.png" class="animal" alt="deer" />
<img src="images/fox.png" class="animal" alt="fox" />
<img src="images/bear.png" class="animal" alt="bear" />
<img src="images/rabbit.png" class="animal" alt="rabbit" />
<img src="images/owl.png" class="animal" alt="owl" />
<img src="images/squirrel.png" class="animal" alt="squirrel" />
<img src="images/monkey.png" class="animal" alt="monkey" />
<img src="images/panda.png" class="animal" alt="panda" />
<img src="images/parrot.png" class="animal" alt="parrot" />
<img src="images/tapir.png" class="animal" alt="tapir" />

<!-- é¡Œç›®å€ -->
<div id="questionBox">
  <div id="questionText"></div>
  <div id="choices"></div>
</div>

<!-- çµæœç•«é¢ -->
<div id="endScreen">
  <div id="resultText"></div>
  <button id="retryBtn">é‡æ–°æŒ‘æˆ°</button>
  <button id="nextLevelBtn">å‰é€²ä¸‹ä¸€é—œ</button>
</div>

<script>
const questions = [
  {question:"ä»€éº¼æ˜¯ç”Ÿç‰©å¤šæ¨£æ€§ï¼Ÿ",choices:["åªæœ‰å“ºä¹³é¡å‹•ç‰©çš„å¤šæ¨£æ€§","æ‰€æœ‰ç”Ÿå‘½å½¢å¼çš„å¤šæ¨£æ€§","æ£®æ—æ¨¹æœ¨æ•¸é‡","æ°´è³‡æºçš„å¤šå¯¡"],answer:1},
  {question:"å“ªä¸€é …è¡Œç‚ºæœ‰åŠ©æ–¼ä¿è­·æ£®æ—ï¼Ÿ",choices:["ç ä¼è€æ¨¹","äº‚ä¸Ÿåƒåœ¾","åƒèˆ‡æ¤æ¨¹æ´»å‹•","çµæ•é‡ç”Ÿå‹•ç‰©"],answer:2},
  {question:"ä»¥ä¸‹å“ªå€‹æ˜¯é™¸åŸŸç”Ÿæ…‹ç³»çš„ä¸€éƒ¨åˆ†ï¼Ÿ",choices:["çŠç‘šç¤","åŸå¸‚å»ºç¯‰","ç†±å¸¶é›¨æ—","æ°´å£©"],answer:2},
  {question:"é‡ç”Ÿå‹•ç‰©éåº¦æ•çµæœƒé€ æˆä»€éº¼å¾Œæœï¼Ÿ",choices:["å¢åŠ ç”Ÿç‰©å¤šæ¨£æ€§","è®“ç‰©ç¨®ç€•è‡¨çµ•ç¨®","ä¿ƒé€²æ—…éŠæ¥­","å¢åŠ æ£®æ—è¦†è“‹ç‡"],answer:1},
  {question:"ç‚ºä»€éº¼è¦ä¿è­·æ¿•åœ°ï¼Ÿ",choices:["å› ç‚ºå®ƒå€‘ä¸é‡è¦","å®ƒå€‘æ˜¯åƒåœ¾å †æ”¾åœ°","å®ƒå€‘æ”¯æŒè¨±å¤šç”Ÿç‰©ç”Ÿå­˜","å®ƒå€‘å¯ä»¥è“‹æˆ¿å­"],answer:2},
  {question:"SDG ç¬¬15é …ç›®æ¨™æ˜¯é—œæ–¼ä»€éº¼ï¼Ÿ",choices:["æ¸›å°‘è²§çª®","ä¿è‚²é™¸åŸŸç”Ÿæ…‹","æ€§åˆ¥å¹³ç­‰","æ°£å€™è¡Œå‹•"],answer:1},
  {question:"ç¨®æ¤æœ¬åœŸæ¤ç‰©æœ‰ä»€éº¼å¥½è™•ï¼Ÿ",choices:["ä½”ç”¨åœŸåœ°","ä¿ƒé€²å¤–ä¾†ç¨®ç”Ÿé•·","ç¶­è­·ç”Ÿæ…‹å¹³è¡¡","æµªè²»æ°´è³‡æº"],answer:2},
  {question:"ä½•è€…ç‚ºä¿è‚²é™¸åŸŸç”Ÿæ…‹çš„æ­£ç¢ºåšæ³•ï¼Ÿ",choices:["éš¨æ„æ•æ‰é‡ç”Ÿå‹•ç‰©","ä¿ç•™æ£²åœ°ç’°å¢ƒ","éåº¦æ”¾ç‰§","ç ä¼åŸå§‹æ—"],answer:1},
  {question:"æ£®æ—é¢ç©æ¸›å°‘æœƒå°è‡´ä»€éº¼ï¼Ÿ",choices:["æ›´å¤šå‹•ç‰©æ£²æ¯åœ°","æ°£å€™ç©©å®š","ç‰©ç¨®æ»…çµ•é¢¨éšªä¸Šå‡","ç©ºæ°£å“è³ªæ”¹å–„"],answer:2},
  {question:"æˆ‘å€‘å¯ä»¥æ€éº¼åƒèˆ‡ä¿è‚²ï¼Ÿ",choices:["ä¸åˆ†é¡åƒåœ¾","æ”¯æŒæ°¸çºŒç”¢å“","ç ´å£æ£²åœ°","é£Ÿç”¨é‡å‘³"],answer:1}
];

let current = 0;
let score = 0;
let currentAnimal = null;
let isQuestionActive = false;

function placeAnimal(animal) {
  const margin = 20;
  const containerWidth = window.innerWidth;
  const containerHeight = window.innerHeight;
  const groundYMin = containerHeight * 0.6;
  const groundYMax = containerHeight * 0.85;

  let x = Math.random() * (containerWidth - 150 - margin);
  let y = groundYMin + Math.random() * (groundYMax - groundYMin);
  animal.style.left = x + "px";
  animal.style.top = y + "px";
}

function showAnimal(index) {
  const animals = document.querySelectorAll('.animal');
  animals.forEach(a => {
    a.style.display = "none";
    a.style.opacity = 1;
    a.classList.remove('correct-effect');
  });
  if (index >= animals.length) return false;
  currentAnimal = animals[index];
  placeAnimal(currentAnimal);
  currentAnimal.style.display = "block";
  return true;
}

function showQuestion() {
  if (current >= questions.length) return;
  isQuestionActive = true;
  const q = questions[current];
  const box = document.getElementById('questionBox');
  document.getElementById('questionText').textContent = q.question;
  const choicesDiv = document.getElementById('choices');
  choicesDiv.innerHTML = '';
  q.choices.forEach((choice, i) => {
    const btn = document.createElement('button');
    btn.textContent = choice;
    btn.onclick = () => checkAnswer(i);
    choicesDiv.appendChild(btn);
  });
  box.style.display = 'block';
}

function hideQuestion() {
  isQuestionActive = false;
  document.getElementById('questionBox').style.display = 'none';
}

function checkAnswer(index) {
  if (!isQuestionActive) return;
  const q = questions[current];
  if (index === q.answer) {
    score++;
    document.getElementById('score').textContent = score;
    hideQuestion();
    currentAnimal.classList.add('correct-effect');
    currentAnimal.style.pointerEvents = "none";

    currentAnimal.addEventListener('animationend', () => {
      currentAnimal.style.transition = "opacity 0.6s ease";
      currentAnimal.style.opacity = 0;
      currentAnimal.addEventListener('transitionend', () => {
        currentAnimal.style.display = 'none';
        current++;
        if (!showAnimal(current)) {
          showEndScreen();
        }
      }, { once: true });
    }, { once: true });
  } else {
    alert('ç­”éŒ¯äº†ï¼Œå†è©¦ä¸€æ¬¡ï¼');
  }
}

function showEndScreen() {
  const end = document.getElementById('endScreen');
  const result = document.getElementById('resultText');
  end.style.display = 'block';
  result.textContent = score >= 8
    ? `å¤ªæ£’äº†ï¼ä½ ç­”å°äº† ${score} é¡Œï¼ŒæˆåŠŸå®ˆè­·æ£®æ—ï¼`
    : `ä½ ç­”å°äº† ${score} é¡Œï¼Œç¹¼çºŒåŠªåŠ›ä¿è­·ç”Ÿæ…‹ï¼`;
}

window.onload = () => {
  const intro = document.getElementById('introScreen');
  const startBtn = document.getElementById('startBtn');
  const header = document.querySelector('header');

  startBtn.addEventListener('click', () => {
    intro.style.display = 'none';
    header.style.display = 'flex';
    showAnimal(current);
  });

  document.querySelectorAll('.animal').forEach(animal => {
    animal.addEventListener('click', () => {
      if (!isQuestionActive && animal === currentAnimal) {
        showQuestion();
      }
    });
  });

  document.getElementById('retryBtn').addEventListener('click', () => {
    location.reload();
  });

  document.getElementById('nextLevelBtn').addEventListener('click', () => {
    window.location.href = "level2.html";
  });
};
</script>

</body>
</html>
